# 実装計画

[!] タスクが完了したらcheckを付け、完了・未完了を区別してください。

## 🎉 MVP完成（2025-11-05）

基本的なソーシャル機能を備えたMVPが完成しました。

### 実装済み機能
- ✅ 認証システム（ログイン・サインアップ・パスワードリセット）
- ✅ オンボーディング（プロフィール設定・興味タグ選択）
- ✅ 投稿機能（テキスト投稿・タグ付け・削除）
- ✅ リアクション機能（👏、💖、🤣）
- ✅ 通知機能（リアクション通知・未読バッジ）
- ✅ タグ別フィルタリング
- ✅ プロフィールページ（ユーザー情報・投稿履歴表示）

---

- [x] 1. Supabase基本設定と最小限のDB構築
  - Supabaseクライアント設定ファイル（lib/supabase/client.ts、server.ts）を作成する
  - SQLを実行する場合、supabase/migrations/ディレクトリにSQLファイルを作成する
  - 最小限のprofilesテーブルとpostsテーブルの作成SQLを記述する
  - 基本的なRLSポリシーの設定SQLを記述する
  - _要件: 1.1, 2.5_

- [x] 2. 最小限の認証機能
  - 簡単なログイン・サインアップページを作成する
  - Supabase Authと連携した認証処理を実装する
  - 認証状態の基本的な管理を実装する
  - _要件: 1.1, 1.2, 1.4_

- [x] 3. オンボーディング機能
  - 新規ユーザー向けの簡単なオンボーディングフォームを実装する
  - ユーザー名設定とプロフィール作成機能を実装する
  - 興味タグ選択機能を実装する
  - _要件: 5.1, 5.2_

- [x] 4. 基本的なレイアウトとナビゲーション
  - シンプルなヘッダーナビゲーションを実装する
  - サイドバーレイアウトを実装する
  - ログイン状態に応じた表示切り替えを実装する
  - _要件: 7.1_

- [x] 5. 投稿一覧表示（ホームフィード）
  - 投稿一覧を表示するシンプルなPostCardコンポーネントを実装する
  - ホームページで全投稿を新着順で表示する機能を実装する
  - 投稿者名と投稿時間を表示する機能を実装する
  - _要件: 3.4, 3.5_

- [x] 6. 基本的な投稿機能（MVP）
  - シンプルな投稿作成フォームを実装する
  - プレーンテキスト投稿をデータベースに保存する機能を実装する
  - 複数タグ選択機能を実装する（プリセット5種類 + カスタムタグ追加機能）
  - _要件: 2.1, 2.2, 2.3, 2.5_

- [x] 7. 基本的なリアクション機能
  - 3つの基本リアクション（👏、💖、🤣）を実装する
  - リアクション追加・削除の基本機能を実装する
  - リアクション数の表示機能を実装する
  - _要件: 4.1, 4.2, 4.4, 4.5_

- [x] 8. タグ別フィルタリング機能
  - サイドバーに固定タグリストを表示する機能を実装する
  - タグクリック時の投稿フィルタリング機能を実装する
  - タグ別投稿一覧ページを実装する
  - サイドバーに「🏠ホーム」ナビゲーションを追加（すべての投稿に戻る機能）
  - _要件: 3.1, 3.2, 3.3_

- [x] 9. 投稿削除機能
  - 自分の投稿に削除ボタンを表示する機能を実装する
  - 投稿削除の基本機能を実装する
  - 削除権限の制御を実装する
  - _要件: 6.1, 6.3, 6.5_

- [x] 10. 通知機能（基本 + UI）
  - notificationsテーブルをマイグレーションで作成する
  - リアクション時に通知レコードを作成する機能を実装する
  - 通知取得・既読処理のヘルパー関数を実装する
  - Headerに通知ベルアイコンと未読バッジを追加する
  - 通知一覧ドロップダウンコンポーネントを実装する
  - Sidebarに「🔔通知」ナビゲーションを追加（通知ページへのリンク）
  - _要件: 4（リアクション機能）_
  - _備考: リアルタイム通知は将来実装予定（Phase 3）_

- [x] 11. 基本的なエラーハンドリング
  - フォームバリデーション（Zod）を実装する
  - 基本的なエラー表示機能を実装する
  - 認証エラーの処理を実装する
  - _要件: 全般_

- [x] 12. プロフィールページ
  - ユーザープロフィール表示ページを実装する
  - ユーザーの投稿履歴表示機能を実装する
  - デフォルトアバター（イニシャル）を表示する機能を実装する
  - プロフィールページへのリンク（Header、PostCard）を実装する
  - _備考: プロフィール編集機能は将来実装予定_
  - _要件: 5.1, 5.3, 5.4_

---

## Phase 2: 追加機能の実装

MVP完成後に実装する追加機能です。

### 画像投稿機能（Phase 2 - 実装中）

**実装開始日:** 2025-11-07

画像アップロード機能を投稿機能に追加します。以下のタスクを順次実装していきます。

- [x] 13. Supabase Storage設定
  - Supabase Storageで`gazo-images`バケットを作成する
  - RLSポリシーを設定する（投稿者のみ削除可能）
  - 公開URLアクセスを許可する設定を行う
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 1. Supabase Storage 設定_

- [x] 14. 画像ユーティリティ関数の実装
  - `lib/images.ts`を作成する
  - 画像バリデーション関数を実装する（`validateImage()`）
  - 画像リサイズ関数を実装する（`resizeImage()`）
  - 画像アップロード関数を実装する（`uploadImage()`, `uploadImages()`）
  - 画像削除関数を実装する（`deleteImage()`, `deletePostWithImages()`）
  - 画像URL管理関数を実装する（`getImagePathFromUrl()`, `getImageFolderPath()`）
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 2. 画像アップロードフロー_

- [x] 15. 画像アップロードコンポーネント
  - `components/posts/ImageUploader.tsx`を実装する
  - ドラッグ&ドロップアップロード機能を実装する
  - 画像プレビュー表示機能を実装する
  - 画像の削除・差し替え機能を実装する
  - 最大4枚までの複数画像アップロードをサポートする
  - 画像の並び替え機能（ドラッグ&ドロップ）を実装する
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 3. 画像表示コンポーネント設計_

- [x] 16. 投稿フォームへの画像機能統合
  - PostFormコンポーネントにImageUploaderを統合する
  - 投稿作成時の画像アップロード処理を実装する
  - 投稿データに画像URLを含める処理を実装する
  - フォームバリデーションに画像チェックを追加する
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 2. 画像アップロードフロー_

- [x] 17. 画像表示コンポーネント
  - `components/posts/ImageGallery.tsx`を実装する（レスポンシブグリッド表示）
  - PostCardコンポーネントに画像グリッド表示を統合する
  - 画像枚数に応じたレイアウト切り替えを実装する（1枚/2枚/3枚/4枚）
  - Next.js Imageコンポーネントを使用した最適化を実装する
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 3. 画像表示コンポーネント設計_

- [x] 18. 画像拡大表示機能（yet-another-react-lightbox使用）
  - `yet-another-react-lightbox` パッケージをインストールする
  - ImageGalleryコンポーネントにLightboxを統合する
  - 画像クリック時のライトボックス表示を実装する
  - ライブラリが提供する機能を確認する（スワイプ、矢印、ESC、インデックス表示）
  - _要件: 2（画像投稿機能）_
  - _設計書: design.md - 画像機能の詳細設計 > 3. 画像表示コンポーネント設計_
  - _ライブラリ: https://yet-another-react-lightbox.com/_

- [x] 19. データベーススキーマ更新
  - postsテーブルの`image_urls`カラムが既に存在することを確認する
  - 必要に応じてマイグレーションを作成する
  - TypeScript型定義を更新する（Post型に`image_urls?: string[]`を追加）
  - _要件: 2（画像投稿機能）_
  - _備考: image_urlsカラムは既存スキーマに含まれている可能性あり_

- [x] 20. 投稿削除時の画像削除処理
  - 投稿削除時に関連画像も削除する処理を実装する
  - `deletePost()` Server Actionを更新する
  - エラーハンドリングを実装する
  - _要件: 6（投稿管理機能）_
  - _設計書: design.md - 投稿API > deletePostWithImages_

- [ ] 21. 画像投稿機能のテストとデプロイ
  - 画像アップロード機能の動作確認を実行する
  - 画像表示機能の動作確認を実行する
  - 画像削除機能の動作確認を実行する
  - レスポンシブ表示の確認を実行する
  - 本番環境へのデプロイと動作確認を実行する
  - _要件: 2（画像投稿機能）_
  - _備考: ローカル動作確認は完了済み（2025-11-10）_

---

## Phase 2.5: 投稿詳細ページ

**実装完了:** 2025-11-11

リプライ機能の前提として、投稿単体を表示するページを実装しました。

- [x] 22. 投稿詳細ページの実装
  - `/posts/[id]/page.tsx` 動的ルートを作成する
  - `getPostById()` Server Actionを実装する（lib/posts.ts）
  - 投稿詳細ページで PostCard を表示する
  - 投稿が存在しない場合は404ページを表示する（Next.js `notFound()`を使用）
  - _備考: URLで投稿を直接共有可能にする、将来リプライ一覧もここに表示_

---

## Phase 3: リプライ（返信）機能

**実装予定:** 投稿詳細ページ完成後

投稿へのリプライ機能です。Twitter/Instagramのように投稿カードの下にリプライが表示されます。

- [x] 23. データベーススキーマ更新（リプライ機能）
  - postsテーブルに`parent_post_id`カラム（UUID、NULL許可）を追加するマイグレーションを作成する
  - `parent_post_id`がNULLの場合は通常投稿、値がある場合はリプライとして扱う
  - 外部キー制約を設定する（`parent_post_id REFERENCES posts(id) ON DELETE CASCADE`）
  - インデックスを追加する（`CREATE INDEX idx_posts_parent_post_id ON posts(parent_post_id)`）
  - TypeScript型定義を更新する（Post型に`parent_post_id?: string`を追加）
  - _備考: リプライもpostsテーブルで管理し、スキーマをシンプルに保つ_

- [x] 24. リプライ作成機能
  - ReplyFormコンポーネントを実装する（テキストのみ、シンプルな入力フォーム）
  - リプライ作成のServer Actionを実装する（`createReply()`）
  - 投稿カードに「返信」ボタンを追加する
  - リプライ作成時にparent_post_idを設定する処理を実装する
  - リプライ投稿時のバリデーションを実装する
  - _備考: 初期実装はテキストのみ、タグは親投稿と同じものを自動設定_

- [x] 25. リプライ表示機能
  - PostCardコンポーネントにリプライ一覧表示を追加する
  - リプライ取得のヘルパー関数を実装する（`getReplies(postId)`）
  - リプライをネスト表示する（投稿カードの下にぶら下がるレイアウト）
  - リプライ数の表示を追加する
  - _備考: Twitter/Instagram形式、最初は折りたたまれた状態_

- [x] 26. リプライ通知機能
  - リプライ作成時に通知レコードを作成する機能を実装する
  - notificationsテーブルの`type`に`'reply'`を追加する
  - 通知メッセージ生成ロジックを更新する（「〇〇さんがあなたの投稿に返信しました」）
  - 通知からリプライ元の投稿に遷移する機能を実装する
  - _備考: 既存の通知システムを拡張_

~~- [ ] 27. リプライへのリアクション機能~~
  - ~~リプライにもリアクションボタンを表示する~~
  - ~~リプライへのリアクション数カウント表示を実装する~~
  - ~~リプライへのリアクション通知を実装する~~
  - ~~_備考: 基本的なリプライ機能が安定してから実装_~~

---

## Phase 4: フォロー・フォロワー機能

**実装予定:** リプライ機能完成後

TwitterやInstagramのようなフォロー関係機能です。ユーザー間のつながりを可視化し、フォロー中のユーザーの投稿を優先的に表示します。

### Phase 4.1: 基本フォロー機能（最優先）

- [x] 30. データベーススキーマ作成（フォロー関係）
  - followsテーブルを作成するマイグレーションを作成する
  - follower_id（フォローする人）、following_id（フォローされる人）カラムを定義する
  - UNIQUE制約で重複フォロー防止を実装する（`UNIQUE(follower_id, following_id)`）
  - CHECK制約で自分自身のフォロー禁止を実装する（`CHECK (follower_id != following_id)`）
  - インデックスを追加する（following_id、follower_id、複合インデックス）
  - RLSポリシーを設定する（閲覧は全員、作成・削除は本人のみ）
  - TypeScript型定義を作成する（`types/follow.ts`）
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > データモデル_

- [x] 31. フォロー/フォロー解除のServer Actions
  - `lib/follows.ts`を作成する
  - `followUser()` Server Actionを実装する（フォロー処理）
  - `unfollowUser()` Server Actionを実装する（フォロー解除処理）
  - `getFollowStatus()` Server Actionを実装する（フォロー状態取得）
  - `getFollowStats()` Server Actionを実装する（フォロー統計取得）
  - バリデーションとエラーハンドリングを実装する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > API設計_

- [x] 32. FollowButtonコンポーネントの実装
  - `components/follows/FollowButton.tsx`を作成する
  - フォロー/フォロー解除のトグルボタンを実装する
  - 楽観的UI更新（即座に反映）を実装する
  - ローディング状態の表示を実装する
  - 相互フォロー状態の表示を実装する
  - 自分自身の場合はボタンを非表示にする処理を実装する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > UI/UXコンポーネント設計_

- [x] 33. プロフィールページへのフォロー機能統合
  - `app/(main)/profile/[username]/page.tsx`にFollowButtonを追加する
  - フォロー状態を取得して表示する処理を実装する
  - 他のユーザーのプロフィール表示時のみボタンを表示する
  - 相互フォロー状態の表示を実装する
  - _要件: 9（フォロー・フォロワー機能）_
  - _備考: 基本的なフォロー機能の動作確認_

### Phase 4.2: フォロー一覧表示

- [x] 34. フォロー一覧取得のServer Actions
  - `getFollowers()` Server Actionを実装する（フォロワー一覧取得）
  - `getFollowing()` Server Actionを実装する（フォロー中一覧取得）
  - プロフィール情報を含むデータ取得を実装する
  - 現在のユーザーとの関係情報を付与する処理を実装する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > API設計_

- [x] 35. FollowListコンポーネントの実装
  - `components/follows/FollowList.tsx`を実装する
  - フォロワー/フォロー中のユーザー一覧を表示する
  - 各ユーザーのアバター、表示名、ユーザー名、bioを表示する
  - 各ユーザーへのFollowButtonを表示する
  - プロフィールへのリンクを実装する
  - 空状態の表示を実装する（「まだフォロワーがいません」等）
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > UI/UXコンポーネント設計_

- [x] 36. フォロワー/フォロー中一覧ページの実装
  - `app/(main)/profile/[username]/connections/page.tsx`を作成する
  - そのユーザーのフォロワー一覧とフォロー中一覧を表示する
  - タブで切り替え可能にする
  - FollowListコンポーネントを使用する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > ページ構成_
  - _備考: 当初は別々のページ（followers/following）の予定だったが、統合してUX向上_

### Phase 4.3: フィード統合（設計変更: 2025-11-12）

**変更内容:**
従来の「ホーム = すべての投稿 + タブ切り替え」から、「ホーム = フォロー中のみ」「みんなの投稿 = すべて」に分離。

- [x] 37. フォロー中ユーザーの投稿取得関数の実装
  - `lib/posts.ts`に`getFollowingPosts()`を追加する
  - フォロー中のユーザーIDを取得する処理を実装する
  - フォロー中のユーザーの投稿のみを取得する処理を実装する
  - トップレベル投稿のみをフィルタリングする
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > API設計_

- [x] 38. 「みんなの投稿」ページの作成
  - `app/(main)/everyone/page.tsx`を作成する
  - `getPosts()`を使用してすべての投稿を表示する
  - 従来のホームページの機能をそのまま移行する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > ページ構成_

- [x] 39. ホームページをフォロー中専用に変更
  - `app/(main)/home/page.tsx`を更新する
  - `getFollowingPosts()`を使用してフォロー中の投稿のみを表示する
  - フォロー中のユーザーがいない場合のオンボーディングメッセージを表示する
  - 「みんなの投稿を見る」へのリンクを追加する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > ページ構成_

- [x] 40. Sidebarナビゲーションの更新
  - `components/layout/Sidebar.tsx`を更新する
  - 「🏠 ホーム」(`/home`) を追加する
  - 「🌐 みんなの投稿」(`/everyone`) を追加する
  - ナビゲーション順序: ホーム → みんなの投稿 → 通知 → タグリスト
  - _要件: 9（フォロー・フォロワー機能）_

### Phase 4.4: 通知機能

- [x] 41. フォロー通知の実装
  - フォロー時に通知レコードを作成する機能を実装する
  - notificationsテーブルの`type`に`'follow'`を追加する
  - 通知メッセージ生成ロジックを更新する（「〇〇さんがあなたをフォローしました」）
  - 通知からフォロワーのプロフィールに遷移する機能を実装する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > 通知システムとの統合_

- [ ] 42. パフォーマンス最適化とテスト
  - バッチ処理でフォロー状態を取得する機能を実装する（N+1問題の回避）
  - 全機能の動作確認とテストを実行する
  - _要件: 9（フォロー・フォロワー機能）_
  - _設計書: design.md - フォロー・フォロワー機能の設計 > パフォーマンス最適化_
  - _備考: 現時点では大きな問題はないため、スケール時に実装_

---

## Phase 5: プロフィール編集機能

**実装予定:** フォロー機能完成後
**GitHub Issue:** #3

ユーザーが自分のプロフィール情報を編集できる機能です。表示名、アバター画像、自己紹介、興味タグの編集が可能で、メールアドレスは表示のみ（編集不可）とします。

### Phase 5.1: インフラ準備

- [x] 43. Supabase Storageバケット設定（avatars）
  - Supabase Storageで`avatars`バケットを作成する
  - 公開アクセスを有効化する
  - ファイル形式を`image/*`に設定する
  - 最大ファイルサイズを2MBに設定する
  - RLSポリシーを設定する（閲覧は全員、アップロード・更新・削除は所有者のみ）
  - ファイルパス構造: `avatars/{userId}/avatar-{timestamp}.{ext}`
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > Supabase Storage設計_
  - _実装完了: 2025-11-13 - マイグレーションファイルとセットアップガイドを作成_

- [x] 44. 画像ユーティリティ関数の拡張（アバター用）
  - `lib/images.ts`にアバター専用関数を追加する
  - `uploadAvatar(file: File, userId: string)` - アバター画像のアップロード
  - `deleteAvatar(avatarUrl: string)` - 既存アバター削除
  - `validateAvatarImage(file: File)` - アバター画像のバリデーション（サイズ、形式）
  - アバター用のリサイズ処理を実装する（推奨: 400x400px）
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > API設計 > 画像ユーティリティ関数_
  - _実装完了: 2025-11-13 - サーバー/クライアント両方のアバター用ユーティリティ関数を実装_

### Phase 5.2: バリデーションとServer Actions

- [x] 45. プロフィール編集用バリデーションスキーマ作成
  - `lib/validations.ts`に`profileEditSchema`を追加する
  - display_name: 必須、1-50文字
  - bio: オプション、0-200文字
  - interests: オプション、配列
  - avatar: オプション、File型、2MB以下、image/jpeg|png|webp
  - エラーメッセージを日本語化する
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > データモデル > バリデーション制約_
  - _実装完了: 2025-11-13 - Zodバリデーションスキーマとエラーメッセージを実装_

- [x] 46. プロフィール編集用Server Actions実装
  - `lib/profiles.ts`を新規作成する
  - `updateUserProfile(data)` - プロフィール情報更新（display_name, bio, interests）
  - `updateAvatar(file)` - アバター画像の更新
  - `removeAvatar()` - アバター画像の削除
  - 認証チェックを実装する（本人のみ編集可能）
  - エラーハンドリングを実装する
  - `revalidatePath()`でプロフィールページのキャッシュを更新する
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > API設計_
  - _実装完了: 2025-11-13 - 3つのServer Actions（更新/アバター更新/アバター削除）を実装_

### Phase 5.3: UIコンポーネント

- [ ] 47. AvatarUploaderコンポーネントの実装
  - `components/profile/AvatarUploader.tsx`を作成する
  - 現在のアバター画像プレビューを表示する
  - クリックまたはドラッグ&ドロップでアップロードする
  - 画像のプレビュー機能を実装する
  - アップロード進行状況を表示する
  - 削除ボタンを実装する
  - クライアントサイドでの画像バリデーションを実装する
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > UIコンポーネント設計 > AvatarUploader_

- [ ] 48. ProfileEditFormコンポーネントの実装
  - `components/profile/ProfileEditForm.tsx`を作成する
  - React Hook Form + Zodを統合する
  - フォームフィールドを実装する:
    - アバター画像（AvatarUploaderコンポーネント）
    - 表示名（display_name）- 必須
    - 自己紹介（bio）- テキストエリア、文字数カウンター付き（0-200文字）
    - 興味タグ（interests）- チェックボックスまたはタグ選択UI
    - メールアドレス - 表示のみ（編集不可、グレーアウト）
  - リアルタイムバリデーションを実装する
  - 保存ボタン・キャンセルボタンを実装する
  - ローディング状態の表示を実装する
  - エラーメッセージ表示を実装する
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > UIコンポーネント設計 > ProfileEditForm_

### Phase 5.4: ページ実装

- [ ] 49. プロフィール編集ページの作成
  - `app/(main)/profile/edit/page.tsx`を作成する
  - 現在のユーザー情報を取得する
  - 未ログインの場合は`/login`にリダイレクトする
  - ProfileEditFormコンポーネントを表示する
  - メールアドレスを取得して表示する（Supabase Auth）
  - メタデータを設定する（`<title>プロフィール編集</title>`）
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > ページ構成_

- [ ] 50. プロフィールページへの編集ボタン追加
  - `app/(main)/profile/[username]/page.tsx`を更新する
  - 自分のプロフィールを見ている場合のみ「プロフィールを編集」ボタンを表示する
  - ボタンクリックで`/profile/edit`に遷移する
  - ボタン配置: フォローボタンの近くまたはプロフィール情報の上部
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > ページ構成_

### Phase 5.5: UX向上

- [ ] 51. フォーム操作のUX向上
  - 未保存の変更がある場合の離脱警告を実装する（`beforeunload`イベント）
  - 楽観的UI更新を実装する（保存後即座にプロフィール表示を更新）
  - 成功時のトースト通知を実装する（「プロフィールを更新しました」）
  - 保存後はプロフィールページへ自動リダイレクトする
  - _要件: Issue #3（プロフィール編集機能）_
  - _設計書: design.md - プロフィール編集機能の設計 > UIコンポーネント設計_

### Phase 5.6: テストとドキュメント

- [ ] 52. プロフィール編集機能のテストとドキュメント整備
  - Server Actionsの単体テストを実施する
  - バリデーションスキーマのテストを実施する
  - E2Eテストを実施する（プロフィール編集フロー）
  - 各フィールドのバリデーションをテストする
  - 離脱警告の動作を確認する
  - レスポンシブデザインを確認する
  - ブラウザ互換性を確認する
  - 実装完了後、Issue #3をクローズする
  - _要件: Issue #3（プロフィール編集機能）_
  - _備考: 基本機能の動作確認を優先、自動テストは時間があれば実施_

---

## 将来実装予定の機能

以下のタスクは、プロフィール編集機能完成後に実装を検討する追加機能です。

### MVPデプロイ

- [ ] 28. 最終調整とMVPデプロイ
  - 全機能の動作確認を実行する
  - Vercelへの基本デプロイを実行する
  - 本番環境での動作確認を実行する
  - _要件: 全般_

### リアルタイム通知機能（Phase 4）

- [ ] 29. リアルタイム通知機能の実装
  - Supabase Realtimeのセットアップを行う
  - WebSocket接続の管理を実装する
  - クライアントコンポーネントでリアルタイムサブスクリプションを実装する
  - 通知受信時のUI更新を実装する
  - 接続エラーハンドリングを実装する
  - _要件: 4（リアクション機能）_
